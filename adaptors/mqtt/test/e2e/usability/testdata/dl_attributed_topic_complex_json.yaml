apiVersion: edge.cattle.io/v1alpha1
kind: DeviceLink
metadata:
  name: kitchen-light
spec:
  adaptor:
    node: edge-worker
    name: adaptors.edge.cattle.io/mqtt
  model:
    apiVersion: "devices.edge.cattle.io/v1alpha1"
    kind: "MQTTDevice"
  template:
    metadata:
      labels:
        device: kitchen-light
    spec:
      protocol:
        pattern: "AttributedTopic"
        client:
          server: "tcp://octopus-simulator-mqtt.octopus-simulator-system:1883"
        message:
          topic: "cattle.io/octopus/home/:operator/kitchen/light/:path"
          operator:
            read: "status"
            write: "set"
      properties:
        - name: "gear"
          description: "The gear of light"
          type: "boolean"
          readOnlye: false
          qos: 2
          value: {
            "name": {"first": "Tom", "last": "Anderson"},
            "age":37,
            "children": ["Sara","Alex","Jack"],
            "fav.movie": "Deer Hunter",
            "friends": [
              {"first": "Dale", "last": "Murphy", "age": 44, "nets": ["ig", "fb", "tw"]},
              {"first": "Roger", "last": "Craig", "age": 68, "nets": ["fb", "tw"]},
              {"first": "Jane", "last": "Murphy", "age": 47, "nets": ["ig", "tw"]}
            ]
          }
